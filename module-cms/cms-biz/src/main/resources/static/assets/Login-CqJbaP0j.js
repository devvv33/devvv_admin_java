import{d as V,u as b,a as S,r as c,b as U,c as k,e as r,f as s,w as n,g as h,h as a,i as B,o as C,j as f,k as M,l as R,m as z,n as E,E as F}from"./index-C8i0fY7D.js";import{_ as I}from"./_plugin-vue_export-helper-DlAUqK2U.js";const L={class:"login-container"},N={class:"login-box"},q=V({__name:"Login",setup(K){const g=B(),_=b(),v=S(),t=c(),l=c(!1),o=U({username:"superadmin",password:"123456"}),w={username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},i=async()=>{t.value&&await t.value.validate(async m=>{if(m){l.value=!0;try{await _.loginByUsername({username:o.username,password:o.password}),await v.loadMenus(),F.success("登录成功");const e=sessionStorage.getItem("redirectUrl");sessionStorage.removeItem("redirectUrl"),g.push(e||"/home")}finally{l.value=!1}}})};return(m,e)=>{const p=a("el-input"),u=a("el-form-item"),y=a("el-button"),x=a("el-form");return C(),k("div",L,[r("div",N,[e[3]||(e[3]=r("div",{class:"login-header"},[r("h2",null,"DevvvAdmin"),r("p",null,"欢迎登录")],-1)),s(x,{ref_key:"loginFormRef",ref:t,model:o,rules:w,class:"login-form",onSubmit:h(i,["prevent"])},{default:n(()=>[s(u,{prop:"username"},{default:n(()=>[s(p,{modelValue:o.username,"onUpdate:modelValue":e[0]||(e[0]=d=>o.username=d),placeholder:"请输入用户名",size:"large","prefix-icon":f(M)},null,8,["modelValue","prefix-icon"])]),_:1}),s(u,{prop:"password"},{default:n(()=>[s(p,{modelValue:o.password,"onUpdate:modelValue":e[1]||(e[1]=d=>o.password=d),type:"password",placeholder:"请输入密码",size:"large","prefix-icon":f(z),onKeyup:R(i,["enter"])},null,8,["modelValue","prefix-icon"])]),_:1}),s(u,null,{default:n(()=>[s(y,{type:"primary",size:"large",class:"login-button",loading:l.value,onClick:i},{default:n(()=>[...e[2]||(e[2]=[E(" 登录 ",-1)])]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"]),e[4]||(e[4]=r("div",{class:"login-tip"},[r("p",null,"测试账号：superadmin / 123456")],-1))])])}}}),D=I(q,[["__scopeId","data-v-02884009"]]);export{D as default};
