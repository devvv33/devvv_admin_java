import{d as Nt,p as Re,r as J,a1 as Cn,q as nn,h as F,O as In,v as te,o as M,w as p,e as k,Q as vt,f as i,n as L,j as ve,a2 as On,a3 as gt,c as le,F as De,y as bt,C as zt,D as xn,z as Se,a4 as Xt,l as Vn,A as Z,E as j,I as yt,s as on,a5 as An,a6 as xt,a as Pn,g as Yt,a7 as Gt,a8 as Fn,a9 as et,M as re,V as Nn,P as kn,U as Mn,N as Ln}from"./index-C8i0fY7D.js";import{a as Un,I as Wt}from"./IconDisplay-BcvWcjpY.js";import{_ as kt}from"./_plugin-vue_export-helper-DlAUqK2U.js";const Rn={class:"icon-selector"},Bn={class:"icon-tabs"},$n={class:"icon-content"},zn={class:"icon-list"},Xn=["onClick"],Yn={class:"icon-name"},Gn={class:"icon-content"},Wn={class:"iconify-search"},Hn={class:"icon-collections"},qn={class:"icon-list"},jn=["onClick"],Jn={class:"icon-name"},Kn={class:"dialog-footer"},Qn={class:"selected-info"},Zn={key:0},eo=Nt({__name:"IconSelector",props:{modelValue:{type:Boolean},currentIcon:{}},emits:["update:modelValue","select"],setup(o,{emit:e}){const t=o,n=e,l=Re({get:()=>t.modelValue,set:_=>n("update:modelValue",_)}),a=J("element"),s=J(""),d=Re(()=>Object.keys(Cn).sort()),c=Re(()=>{if(!s.value)return d.value;const _=s.value.toLowerCase();return d.value.filter(b=>b.toLowerCase().includes(_))}),f=J(""),g=J(!1),m=J([]),E=J(""),O=[{id:"mdi",name:"Material Design"},{id:"fa",name:"Font Awesome"},{id:"bi",name:"Bootstrap Icons"},{id:"ant-design",name:"Ant Design"},{id:"lucide",name:"简笔画"},{id:"logos",name:"logos"},{id:"simple-icons",name:"simple-icons"},{id:"ph",name:"ph"},{id:"tabler",name:"tabler"}],y=J({type:"",name:""}),w=async _=>{E.value=_,g.value=!0;try{const q=await(await fetch(`https://api.iconify.design/collection?prefix=${_}`)).json();q.uncategorized&&(m.value=q.uncategorized.slice(0,1e3).map(G=>`${_}:${G}`))}catch(b){j.error("加载图标集失败"),console.error(b)}finally{g.value=!1}},U=async()=>{if(!f.value.trim()){j.warning("请输入搜索关键词");return}g.value=!0;try{const b=await(await fetch(`https://api.iconify.design/search?query=${encodeURIComponent(f.value)}&limit=500`)).json();b.icons&&b.icons.length>0?(m.value=b.icons,j.success(`找到 ${b.icons.length} 个图标`)):(m.value=[],j.info("未找到相关图标"))}catch(_){j.error("搜索失败，请检查网络连接"),console.error(_)}finally{g.value=!1}},N=(_,b,q)=>{y.value={type:_,name:b,content:q}},r=(_,b)=>y.value.type===_&&y.value.name===b,z=()=>{if(!y.value.type){j.warning("请选择一个图标");return}n("select",y.value),l.value=!1},Y=()=>{l.value=!1},ae=()=>{};return nn(l,_=>{_&&t.currentIcon&&(d.value.includes(t.currentIcon)?(a.value="element",y.value={type:"element",name:t.currentIcon}):t.currentIcon.includes(":")&&(a.value="iconify",y.value={type:"iconify",name:t.currentIcon}))}),(_,b)=>{const q=F("el-icon"),G=F("el-tab-pane"),Ee=F("el-tabs"),de=F("el-input"),ge=F("el-button"),ie=F("el-tag"),v=F("el-divider"),u=F("el-empty"),A=F("el-dialog"),x=In("loading");return M(),te(A,{modelValue:l.value,"onUpdate:modelValue":b[3]||(b[3]=I=>l.value=I),title:"选择图标",width:"900px","close-on-click-modal":!1,onClose:Y},{footer:p(()=>[k("div",Kn,[k("div",Qn,[y.value.type?(M(),le("span",Zn,[b[8]||(b[8]=L(" 已选择：",-1)),i(ie,null,{default:p(()=>[L(Se(y.value.type)+" - "+Se(y.value.name),1)]),_:1})])):Z("",!0)]),k("div",null,[i(ge,{onClick:Y},{default:p(()=>[...b[9]||(b[9]=[L("取消",-1)])]),_:1}),i(ge,{type:"primary",onClick:z},{default:p(()=>[...b[10]||(b[10]=[L("确定",-1)])]),_:1})])])]),default:p(()=>[k("div",Rn,[k("div",Bn,[i(Ee,{modelValue:a.value,"onUpdate:modelValue":b[0]||(b[0]=I=>a.value=I),onTabChange:ae},{default:p(()=>[i(G,{label:"Element Plus",name:"element"},{label:p(()=>[k("span",null,[i(q,null,{default:p(()=>[i(ve(On))]),_:1}),b[4]||(b[4]=L(" Element Plus",-1))])]),_:1}),i(G,{label:"Iconify",name:"iconify"},{label:p(()=>[k("span",null,[i(q,null,{default:p(()=>[i(ve(gt))]),_:1}),b[5]||(b[5]=L(" Iconify (在线搜索)",-1))])]),_:1})]),_:1},8,["modelValue"])]),vt(k("div",$n,[i(de,{modelValue:s.value,"onUpdate:modelValue":b[1]||(b[1]=I=>s.value=I),placeholder:"搜索 Element Plus 图标",clearable:"",class:"search-input"},{prefix:p(()=>[i(q,null,{default:p(()=>[i(ve(gt))]),_:1})]),_:1},8,["modelValue"]),k("div",zn,[(M(!0),le(De,null,bt(c.value,I=>(M(),le("div",{key:I,class:zt(["icon-item",{active:r("element",I)}]),onClick:K=>N("element",I)},[i(q,{style:{"font-size":"24px"}},{default:p(()=>[(M(),te(xn(I)))]),_:2},1024),k("span",Yn,Se(I),1)],10,Xn))),128))])],512),[[Xt,a.value==="element"]]),vt(k("div",Gn,[k("div",Wn,[i(de,{modelValue:f.value,"onUpdate:modelValue":b[2]||(b[2]=I=>f.value=I),placeholder:"搜索图标（例如：home, user, settings）",clearable:"",class:"search-input",onKeyup:Vn(U,["enter"])},{prefix:p(()=>[i(q,null,{default:p(()=>[i(ve(gt))]),_:1})]),append:p(()=>[i(ge,{loading:g.value,onClick:U},{default:p(()=>[...b[6]||(b[6]=[L("搜索",-1)])]),_:1},8,["loading"])]),_:1},8,["modelValue"]),k("div",Hn,[b[7]||(b[7]=k("span",{class:"label"},"常用图标集：",-1)),(M(),le(De,null,bt(O,I=>i(ie,{key:I.id,type:E.value===I.id?"primary":"info",class:"collection-tag",onClick:K=>w(I.id)},{default:p(()=>[L(Se(I.name),1)]),_:2},1032,["type","onClick"])),64))])]),i(v),vt((M(),le("div",qn,[m.value.length===0&&!g.value?(M(),te(u,{key:0,description:"搜索图标或选择图标集"})):Z("",!0),(M(!0),le(De,null,bt(m.value,I=>(M(),le("div",{key:I,class:zt(["icon-item",{active:r("iconify",I)}]),onClick:K=>N("iconify",I)},[i(ve(Un),{icon:I,width:"24",height:"24"},null,8,["icon"]),k("span",Jn,Se(I),1)],10,jn))),128))])),[[x,g.value]])],512),[[Xt,a.value==="iconify"]])])]),_:1},8,["modelValue"])}}}),to=kt(eo,[["__scopeId","data-v-d520a854"]]);/**!
 * Sortable 1.15.6
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function Ht(o,e){var t=Object.keys(o);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(o);e&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(o,l).enumerable})),t.push.apply(t,n)}return t}function Te(o){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Ht(Object(t),!0).forEach(function(n){no(o,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(t)):Ht(Object(t)).forEach(function(n){Object.defineProperty(o,n,Object.getOwnPropertyDescriptor(t,n))})}return o}function at(o){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?at=function(e){return typeof e}:at=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},at(o)}function no(o,e,t){return e in o?Object.defineProperty(o,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):o[e]=t,o}function Ie(){return Ie=Object.assign||function(o){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n])}return o},Ie.apply(this,arguments)}function oo(o,e){if(o==null)return{};var t={},n=Object.keys(o),l,a;for(a=0;a<n.length;a++)l=n[a],!(e.indexOf(l)>=0)&&(t[l]=o[l]);return t}function lo(o,e){if(o==null)return{};var t=oo(o,e),n,l;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(o);for(l=0;l<a.length;l++)n=a[l],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(o,n)&&(t[n]=o[n])}return t}var ao="1.15.6";function Ce(o){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(o)}var Oe=Ce(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Ke=Ce(/Edge/i),qt=Ce(/firefox/i),We=Ce(/safari/i)&&!Ce(/chrome/i)&&!Ce(/android/i),Mt=Ce(/iP(ad|od|hone)/i),ln=Ce(/chrome/i)&&Ce(/android/i),an={capture:!1,passive:!1};function P(o,e,t){o.addEventListener(e,t,!Oe&&an)}function V(o,e,t){o.removeEventListener(e,t,!Oe&&an)}function dt(o,e){if(e){if(e[0]===">"&&(e=e.substring(1)),o)try{if(o.matches)return o.matches(e);if(o.msMatchesSelector)return o.msMatchesSelector(e);if(o.webkitMatchesSelector)return o.webkitMatchesSelector(e)}catch{return!1}return!1}}function rn(o){return o.host&&o!==document&&o.host.nodeType?o.host:o.parentNode}function _e(o,e,t,n){if(o){t=t||document;do{if(e!=null&&(e[0]===">"?o.parentNode===t&&dt(o,e):dt(o,e))||n&&o===t)return o;if(o===t)break}while(o=rn(o))}return null}var jt=/\s+/g;function ce(o,e,t){if(o&&e)if(o.classList)o.classList[t?"add":"remove"](e);else{var n=(" "+o.className+" ").replace(jt," ").replace(" "+e+" "," ");o.className=(n+(t?" "+e:"")).replace(jt," ")}}function S(o,e,t){var n=o&&o.style;if(n){if(t===void 0)return document.defaultView&&document.defaultView.getComputedStyle?t=document.defaultView.getComputedStyle(o,""):o.currentStyle&&(t=o.currentStyle),e===void 0?t:t[e];!(e in n)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),n[e]=t+(typeof t=="string"?"":"px")}}function Be(o,e){var t="";if(typeof o=="string")t=o;else do{var n=S(o,"transform");n&&n!=="none"&&(t=n+" "+t)}while(!e&&(o=o.parentNode));var l=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return l&&new l(t)}function sn(o,e,t){if(o){var n=o.getElementsByTagName(e),l=0,a=n.length;if(t)for(;l<a;l++)t(n[l],l);return n}return[]}function we(){var o=document.scrollingElement;return o||document.documentElement}function H(o,e,t,n,l){if(!(!o.getBoundingClientRect&&o!==window)){var a,s,d,c,f,g,m;if(o!==window&&o.parentNode&&o!==we()?(a=o.getBoundingClientRect(),s=a.top,d=a.left,c=a.bottom,f=a.right,g=a.height,m=a.width):(s=0,d=0,c=window.innerHeight,f=window.innerWidth,g=window.innerHeight,m=window.innerWidth),(e||t)&&o!==window&&(l=l||o.parentNode,!Oe))do if(l&&l.getBoundingClientRect&&(S(l,"transform")!=="none"||t&&S(l,"position")!=="static")){var E=l.getBoundingClientRect();s-=E.top+parseInt(S(l,"border-top-width")),d-=E.left+parseInt(S(l,"border-left-width")),c=s+a.height,f=d+a.width;break}while(l=l.parentNode);if(n&&o!==window){var O=Be(l||o),y=O&&O.a,w=O&&O.d;O&&(s/=w,d/=y,m/=y,g/=w,c=s+g,f=d+m)}return{top:s,left:d,bottom:c,right:f,width:m,height:g}}}function Jt(o,e,t){for(var n=Ae(o,!0),l=H(o)[e];n;){var a=H(n)[t],s=void 0;if(s=l>=a,!s)return n;if(n===we())break;n=Ae(n,!1)}return!1}function $e(o,e,t,n){for(var l=0,a=0,s=o.children;a<s.length;){if(s[a].style.display!=="none"&&s[a]!==D.ghost&&(n||s[a]!==D.dragged)&&_e(s[a],t.draggable,o,!1)){if(l===e)return s[a];l++}a++}return null}function Lt(o,e){for(var t=o.lastElementChild;t&&(t===D.ghost||S(t,"display")==="none"||e&&!dt(t,e));)t=t.previousElementSibling;return t||null}function he(o,e){var t=0;if(!o||!o.parentNode)return-1;for(;o=o.previousElementSibling;)o.nodeName.toUpperCase()!=="TEMPLATE"&&o!==D.clone&&(!e||dt(o,e))&&t++;return t}function Kt(o){var e=0,t=0,n=we();if(o)do{var l=Be(o),a=l.a,s=l.d;e+=o.scrollLeft*a,t+=o.scrollTop*s}while(o!==n&&(o=o.parentNode));return[e,t]}function io(o,e){for(var t in o)if(o.hasOwnProperty(t)){for(var n in e)if(e.hasOwnProperty(n)&&e[n]===o[t][n])return Number(t)}return-1}function Ae(o,e){if(!o||!o.getBoundingClientRect)return we();var t=o,n=!1;do if(t.clientWidth<t.scrollWidth||t.clientHeight<t.scrollHeight){var l=S(t);if(t.clientWidth<t.scrollWidth&&(l.overflowX=="auto"||l.overflowX=="scroll")||t.clientHeight<t.scrollHeight&&(l.overflowY=="auto"||l.overflowY=="scroll")){if(!t.getBoundingClientRect||t===document.body)return we();if(n||e)return t;n=!0}}while(t=t.parentNode);return we()}function ro(o,e){if(o&&e)for(var t in e)e.hasOwnProperty(t)&&(o[t]=e[t]);return o}function _t(o,e){return Math.round(o.top)===Math.round(e.top)&&Math.round(o.left)===Math.round(e.left)&&Math.round(o.height)===Math.round(e.height)&&Math.round(o.width)===Math.round(e.width)}var He;function un(o,e){return function(){if(!He){var t=arguments,n=this;t.length===1?o.call(n,t[0]):o.apply(n,t),He=setTimeout(function(){He=void 0},e)}}}function so(){clearTimeout(He),He=void 0}function dn(o,e,t){o.scrollLeft+=e,o.scrollTop+=t}function cn(o){var e=window.Polymer,t=window.jQuery||window.Zepto;return e&&e.dom?e.dom(o).cloneNode(!0):t?t(o).clone(!0)[0]:o.cloneNode(!0)}function fn(o,e,t){var n={};return Array.from(o.children).forEach(function(l){var a,s,d,c;if(!(!_e(l,e.draggable,o,!1)||l.animated||l===t)){var f=H(l);n.left=Math.min((a=n.left)!==null&&a!==void 0?a:1/0,f.left),n.top=Math.min((s=n.top)!==null&&s!==void 0?s:1/0,f.top),n.right=Math.max((d=n.right)!==null&&d!==void 0?d:-1/0,f.right),n.bottom=Math.max((c=n.bottom)!==null&&c!==void 0?c:-1/0,f.bottom)}}),n.width=n.right-n.left,n.height=n.bottom-n.top,n.x=n.left,n.y=n.top,n}var ue="Sortable"+new Date().getTime();function uo(){var o=[],e;return{captureAnimationState:function(){if(o=[],!!this.options.animation){var n=[].slice.call(this.el.children);n.forEach(function(l){if(!(S(l,"display")==="none"||l===D.ghost)){o.push({target:l,rect:H(l)});var a=Te({},o[o.length-1].rect);if(l.thisAnimationDuration){var s=Be(l,!0);s&&(a.top-=s.f,a.left-=s.e)}l.fromRect=a}})}},addAnimationState:function(n){o.push(n)},removeAnimationState:function(n){o.splice(io(o,{target:n}),1)},animateAll:function(n){var l=this;if(!this.options.animation){clearTimeout(e),typeof n=="function"&&n();return}var a=!1,s=0;o.forEach(function(d){var c=0,f=d.target,g=f.fromRect,m=H(f),E=f.prevFromRect,O=f.prevToRect,y=d.rect,w=Be(f,!0);w&&(m.top-=w.f,m.left-=w.e),f.toRect=m,f.thisAnimationDuration&&_t(E,m)&&!_t(g,m)&&(y.top-m.top)/(y.left-m.left)===(g.top-m.top)/(g.left-m.left)&&(c=fo(y,E,O,l.options)),_t(m,g)||(f.prevFromRect=g,f.prevToRect=m,c||(c=l.options.animation),l.animate(f,y,m,c)),c&&(a=!0,s=Math.max(s,c),clearTimeout(f.animationResetTimer),f.animationResetTimer=setTimeout(function(){f.animationTime=0,f.prevFromRect=null,f.fromRect=null,f.prevToRect=null,f.thisAnimationDuration=null},c),f.thisAnimationDuration=c)}),clearTimeout(e),a?e=setTimeout(function(){typeof n=="function"&&n()},s):typeof n=="function"&&n(),o=[]},animate:function(n,l,a,s){if(s){S(n,"transition",""),S(n,"transform","");var d=Be(this.el),c=d&&d.a,f=d&&d.d,g=(l.left-a.left)/(c||1),m=(l.top-a.top)/(f||1);n.animatingX=!!g,n.animatingY=!!m,S(n,"transform","translate3d("+g+"px,"+m+"px,0)"),this.forRepaintDummy=co(n),S(n,"transition","transform "+s+"ms"+(this.options.easing?" "+this.options.easing:"")),S(n,"transform","translate3d(0,0,0)"),typeof n.animated=="number"&&clearTimeout(n.animated),n.animated=setTimeout(function(){S(n,"transition",""),S(n,"transform",""),n.animated=!1,n.animatingX=!1,n.animatingY=!1},s)}}}}function co(o){return o.offsetWidth}function fo(o,e,t,n){return Math.sqrt(Math.pow(e.top-o.top,2)+Math.pow(e.left-o.left,2))/Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))*n.animation}var ke=[],wt={initializeByDefault:!0},Qe={mount:function(e){for(var t in wt)wt.hasOwnProperty(t)&&!(t in e)&&(e[t]=wt[t]);ke.forEach(function(n){if(n.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),ke.push(e)},pluginEvent:function(e,t,n){var l=this;this.eventCanceled=!1,n.cancel=function(){l.eventCanceled=!0};var a=e+"Global";ke.forEach(function(s){t[s.pluginName]&&(t[s.pluginName][a]&&t[s.pluginName][a](Te({sortable:t},n)),t.options[s.pluginName]&&t[s.pluginName][e]&&t[s.pluginName][e](Te({sortable:t},n)))})},initializePlugins:function(e,t,n,l){ke.forEach(function(d){var c=d.pluginName;if(!(!e.options[c]&&!d.initializeByDefault)){var f=new d(e,t,e.options);f.sortable=e,f.options=e.options,e[c]=f,Ie(n,f.defaults)}});for(var a in e.options)if(e.options.hasOwnProperty(a)){var s=this.modifyOption(e,a,e.options[a]);typeof s<"u"&&(e.options[a]=s)}},getEventProperties:function(e,t){var n={};return ke.forEach(function(l){typeof l.eventProperties=="function"&&Ie(n,l.eventProperties.call(t[l.pluginName],e))}),n},modifyOption:function(e,t,n){var l;return ke.forEach(function(a){e[a.pluginName]&&a.optionListeners&&typeof a.optionListeners[t]=="function"&&(l=a.optionListeners[t].call(e[a.pluginName],n))}),l}};function po(o){var e=o.sortable,t=o.rootEl,n=o.name,l=o.targetEl,a=o.cloneEl,s=o.toEl,d=o.fromEl,c=o.oldIndex,f=o.newIndex,g=o.oldDraggableIndex,m=o.newDraggableIndex,E=o.originalEvent,O=o.putSortable,y=o.extraEventProperties;if(e=e||t&&t[ue],!!e){var w,U=e.options,N="on"+n.charAt(0).toUpperCase()+n.substr(1);window.CustomEvent&&!Oe&&!Ke?w=new CustomEvent(n,{bubbles:!0,cancelable:!0}):(w=document.createEvent("Event"),w.initEvent(n,!0,!0)),w.to=s||t,w.from=d||t,w.item=l||t,w.clone=a,w.oldIndex=c,w.newIndex=f,w.oldDraggableIndex=g,w.newDraggableIndex=m,w.originalEvent=E,w.pullMode=O?O.lastPutMode:void 0;var r=Te(Te({},y),Qe.getEventProperties(n,e));for(var z in r)w[z]=r[z];t&&t.dispatchEvent(w),U[N]&&U[N].call(e,w)}}var mo=["evt"],se=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},l=n.evt,a=lo(n,mo);Qe.pluginEvent.bind(D)(e,t,Te({dragEl:h,parentEl:$,ghostEl:C,rootEl:R,nextEl:Ne,lastDownEl:it,cloneEl:B,cloneHidden:Ve,dragStarted:Xe,putSortable:Q,activeSortable:D.active,originalEvent:l,oldIndex:Ue,oldDraggableIndex:qe,newIndex:fe,newDraggableIndex:xe,hideGhostForTarget:vn,unhideGhostForTarget:gn,cloneNowHidden:function(){Ve=!0},cloneNowShown:function(){Ve=!1},dispatchSortableEvent:function(d){oe({sortable:t,name:d,originalEvent:l})}},a))};function oe(o){po(Te({putSortable:Q,cloneEl:B,targetEl:h,rootEl:R,oldIndex:Ue,oldDraggableIndex:qe,newIndex:fe,newDraggableIndex:xe},o))}var h,$,C,R,Ne,it,B,Ve,Ue,fe,qe,xe,tt,Q,Le=!1,ct=!1,ft=[],Pe,ye,Tt,Et,Qt,Zt,Xe,Me,je,Je=!1,nt=!1,rt,ee,St=[],Vt=!1,pt=[],ht=typeof document<"u",ot=Mt,en=Ke||Oe?"cssFloat":"float",ho=ht&&!ln&&!Mt&&"draggable"in document.createElement("div"),pn=function(){if(ht){if(Oe)return!1;var o=document.createElement("x");return o.style.cssText="pointer-events:auto",o.style.pointerEvents==="auto"}}(),mn=function(e,t){var n=S(e),l=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),a=$e(e,0,t),s=$e(e,1,t),d=a&&S(a),c=s&&S(s),f=d&&parseInt(d.marginLeft)+parseInt(d.marginRight)+H(a).width,g=c&&parseInt(c.marginLeft)+parseInt(c.marginRight)+H(s).width;if(n.display==="flex")return n.flexDirection==="column"||n.flexDirection==="column-reverse"?"vertical":"horizontal";if(n.display==="grid")return n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(a&&d.float&&d.float!=="none"){var m=d.float==="left"?"left":"right";return s&&(c.clear==="both"||c.clear===m)?"vertical":"horizontal"}return a&&(d.display==="block"||d.display==="flex"||d.display==="table"||d.display==="grid"||f>=l&&n[en]==="none"||s&&n[en]==="none"&&f+g>l)?"vertical":"horizontal"},vo=function(e,t,n){var l=n?e.left:e.top,a=n?e.right:e.bottom,s=n?e.width:e.height,d=n?t.left:t.top,c=n?t.right:t.bottom,f=n?t.width:t.height;return l===d||a===c||l+s/2===d+f/2},go=function(e,t){var n;return ft.some(function(l){var a=l[ue].options.emptyInsertThreshold;if(!(!a||Lt(l))){var s=H(l),d=e>=s.left-a&&e<=s.right+a,c=t>=s.top-a&&t<=s.bottom+a;if(d&&c)return n=l}}),n},hn=function(e){function t(a,s){return function(d,c,f,g){var m=d.options.group.name&&c.options.group.name&&d.options.group.name===c.options.group.name;if(a==null&&(s||m))return!0;if(a==null||a===!1)return!1;if(s&&a==="clone")return a;if(typeof a=="function")return t(a(d,c,f,g),s)(d,c,f,g);var E=(s?d:c).options.group.name;return a===!0||typeof a=="string"&&a===E||a.join&&a.indexOf(E)>-1}}var n={},l=e.group;(!l||at(l)!="object")&&(l={name:l}),n.name=l.name,n.checkPull=t(l.pull,!0),n.checkPut=t(l.put),n.revertClone=l.revertClone,e.group=n},vn=function(){!pn&&C&&S(C,"display","none")},gn=function(){!pn&&C&&S(C,"display","")};ht&&!ln&&document.addEventListener("click",function(o){if(ct)return o.preventDefault(),o.stopPropagation&&o.stopPropagation(),o.stopImmediatePropagation&&o.stopImmediatePropagation(),ct=!1,!1},!0);var Fe=function(e){if(h){e=e.touches?e.touches[0]:e;var t=go(e.clientX,e.clientY);if(t){var n={};for(var l in e)e.hasOwnProperty(l)&&(n[l]=e[l]);n.target=n.rootEl=t,n.preventDefault=void 0,n.stopPropagation=void 0,t[ue]._onDragOver(n)}}},bo=function(e){h&&h.parentNode[ue]._isOutsideThisEl(e.target)};function D(o,e){if(!(o&&o.nodeType&&o.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(o));this.el=o,this.options=e=Ie({},e),o[ue]=this;var t={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(o.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return mn(o,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(s,d){s.setData("Text",d.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:D.supportPointer!==!1&&"PointerEvent"in window&&(!We||Mt),emptyInsertThreshold:5};Qe.initializePlugins(this,o,t);for(var n in t)!(n in e)&&(e[n]=t[n]);hn(e);for(var l in this)l.charAt(0)==="_"&&typeof this[l]=="function"&&(this[l]=this[l].bind(this));this.nativeDraggable=e.forceFallback?!1:ho,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?P(o,"pointerdown",this._onTapStart):(P(o,"mousedown",this._onTapStart),P(o,"touchstart",this._onTapStart)),this.nativeDraggable&&(P(o,"dragover",this),P(o,"dragenter",this)),ft.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),Ie(this,uo())}D.prototype={constructor:D,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(Me=null)},_getDirection:function(e,t){return typeof this.options.direction=="function"?this.options.direction.call(this,e,t,h):this.options.direction},_onTapStart:function(e){if(e.cancelable){var t=this,n=this.el,l=this.options,a=l.preventOnFilter,s=e.type,d=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,c=(d||e).target,f=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||c,g=l.filter;if(Co(n),!h&&!(/mousedown|pointerdown/.test(s)&&e.button!==0||l.disabled)&&!f.isContentEditable&&!(!this.nativeDraggable&&We&&c&&c.tagName.toUpperCase()==="SELECT")&&(c=_e(c,l.draggable,n,!1),!(c&&c.animated)&&it!==c)){if(Ue=he(c),qe=he(c,l.draggable),typeof g=="function"){if(g.call(this,e,c,this)){oe({sortable:t,rootEl:f,name:"filter",targetEl:c,toEl:n,fromEl:n}),se("filter",t,{evt:e}),a&&e.preventDefault();return}}else if(g&&(g=g.split(",").some(function(m){if(m=_e(f,m.trim(),n,!1),m)return oe({sortable:t,rootEl:m,name:"filter",targetEl:c,fromEl:n,toEl:n}),se("filter",t,{evt:e}),!0}),g)){a&&e.preventDefault();return}l.handle&&!_e(f,l.handle,n,!1)||this._prepareDragStart(e,d,c)}}},_prepareDragStart:function(e,t,n){var l=this,a=l.el,s=l.options,d=a.ownerDocument,c;if(n&&!h&&n.parentNode===a){var f=H(n);if(R=a,h=n,$=h.parentNode,Ne=h.nextSibling,it=n,tt=s.group,D.dragged=h,Pe={target:h,clientX:(t||e).clientX,clientY:(t||e).clientY},Qt=Pe.clientX-f.left,Zt=Pe.clientY-f.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,h.style["will-change"]="all",c=function(){if(se("delayEnded",l,{evt:e}),D.eventCanceled){l._onDrop();return}l._disableDelayedDragEvents(),!qt&&l.nativeDraggable&&(h.draggable=!0),l._triggerDragStart(e,t),oe({sortable:l,name:"choose",originalEvent:e}),ce(h,s.chosenClass,!0)},s.ignore.split(",").forEach(function(g){sn(h,g.trim(),Dt)}),P(d,"dragover",Fe),P(d,"mousemove",Fe),P(d,"touchmove",Fe),s.supportPointer?(P(d,"pointerup",l._onDrop),!this.nativeDraggable&&P(d,"pointercancel",l._onDrop)):(P(d,"mouseup",l._onDrop),P(d,"touchend",l._onDrop),P(d,"touchcancel",l._onDrop)),qt&&this.nativeDraggable&&(this.options.touchStartThreshold=4,h.draggable=!0),se("delayStart",this,{evt:e}),s.delay&&(!s.delayOnTouchOnly||t)&&(!this.nativeDraggable||!(Ke||Oe))){if(D.eventCanceled){this._onDrop();return}s.supportPointer?(P(d,"pointerup",l._disableDelayedDrag),P(d,"pointercancel",l._disableDelayedDrag)):(P(d,"mouseup",l._disableDelayedDrag),P(d,"touchend",l._disableDelayedDrag),P(d,"touchcancel",l._disableDelayedDrag)),P(d,"mousemove",l._delayedDragTouchMoveHandler),P(d,"touchmove",l._delayedDragTouchMoveHandler),s.supportPointer&&P(d,"pointermove",l._delayedDragTouchMoveHandler),l._dragStartTimer=setTimeout(c,s.delay)}else c()}},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){h&&Dt(h),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;V(e,"mouseup",this._disableDelayedDrag),V(e,"touchend",this._disableDelayedDrag),V(e,"touchcancel",this._disableDelayedDrag),V(e,"pointerup",this._disableDelayedDrag),V(e,"pointercancel",this._disableDelayedDrag),V(e,"mousemove",this._delayedDragTouchMoveHandler),V(e,"touchmove",this._delayedDragTouchMoveHandler),V(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||e.pointerType=="touch"&&e,!this.nativeDraggable||t?this.options.supportPointer?P(document,"pointermove",this._onTouchMove):t?P(document,"touchmove",this._onTouchMove):P(document,"mousemove",this._onTouchMove):(P(h,"dragend",this),P(R,"dragstart",this._onDragStart));try{document.selection?st(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,t){if(Le=!1,R&&h){se("dragStarted",this,{evt:t}),this.nativeDraggable&&P(document,"dragover",bo);var n=this.options;!e&&ce(h,n.dragClass,!1),ce(h,n.ghostClass,!0),D.active=this,e&&this._appendGhost(),oe({sortable:this,name:"start",originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(ye){this._lastX=ye.clientX,this._lastY=ye.clientY,vn();for(var e=document.elementFromPoint(ye.clientX,ye.clientY),t=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(ye.clientX,ye.clientY),e!==t);)t=e;if(h.parentNode[ue]._isOutsideThisEl(e),t)do{if(t[ue]){var n=void 0;if(n=t[ue]._onDragOver({clientX:ye.clientX,clientY:ye.clientY,target:e,rootEl:t}),n&&!this.options.dragoverBubble)break}e=t}while(t=rn(t));gn()}},_onTouchMove:function(e){if(Pe){var t=this.options,n=t.fallbackTolerance,l=t.fallbackOffset,a=e.touches?e.touches[0]:e,s=C&&Be(C,!0),d=C&&s&&s.a,c=C&&s&&s.d,f=ot&&ee&&Kt(ee),g=(a.clientX-Pe.clientX+l.x)/(d||1)+(f?f[0]-St[0]:0)/(d||1),m=(a.clientY-Pe.clientY+l.y)/(c||1)+(f?f[1]-St[1]:0)/(c||1);if(!D.active&&!Le){if(n&&Math.max(Math.abs(a.clientX-this._lastX),Math.abs(a.clientY-this._lastY))<n)return;this._onDragStart(e,!0)}if(C){s?(s.e+=g-(Tt||0),s.f+=m-(Et||0)):s={a:1,b:0,c:0,d:1,e:g,f:m};var E="matrix(".concat(s.a,",").concat(s.b,",").concat(s.c,",").concat(s.d,",").concat(s.e,",").concat(s.f,")");S(C,"webkitTransform",E),S(C,"mozTransform",E),S(C,"msTransform",E),S(C,"transform",E),Tt=g,Et=m,ye=a}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!C){var e=this.options.fallbackOnBody?document.body:R,t=H(h,!0,ot,!0,e),n=this.options;if(ot){for(ee=e;S(ee,"position")==="static"&&S(ee,"transform")==="none"&&ee!==document;)ee=ee.parentNode;ee!==document.body&&ee!==document.documentElement?(ee===document&&(ee=we()),t.top+=ee.scrollTop,t.left+=ee.scrollLeft):ee=we(),St=Kt(ee)}C=h.cloneNode(!0),ce(C,n.ghostClass,!1),ce(C,n.fallbackClass,!0),ce(C,n.dragClass,!0),S(C,"transition",""),S(C,"transform",""),S(C,"box-sizing","border-box"),S(C,"margin",0),S(C,"top",t.top),S(C,"left",t.left),S(C,"width",t.width),S(C,"height",t.height),S(C,"opacity","0.8"),S(C,"position",ot?"absolute":"fixed"),S(C,"zIndex","100000"),S(C,"pointerEvents","none"),D.ghost=C,e.appendChild(C),S(C,"transform-origin",Qt/parseInt(C.style.width)*100+"% "+Zt/parseInt(C.style.height)*100+"%")}},_onDragStart:function(e,t){var n=this,l=e.dataTransfer,a=n.options;if(se("dragStart",this,{evt:e}),D.eventCanceled){this._onDrop();return}se("setupClone",this),D.eventCanceled||(B=cn(h),B.removeAttribute("id"),B.draggable=!1,B.style["will-change"]="",this._hideClone(),ce(B,this.options.chosenClass,!1),D.clone=B),n.cloneId=st(function(){se("clone",n),!D.eventCanceled&&(n.options.removeCloneOnHide||R.insertBefore(B,h),n._hideClone(),oe({sortable:n,name:"clone"}))}),!t&&ce(h,a.dragClass,!0),t?(ct=!0,n._loopId=setInterval(n._emulateDragOver,50)):(V(document,"mouseup",n._onDrop),V(document,"touchend",n._onDrop),V(document,"touchcancel",n._onDrop),l&&(l.effectAllowed="move",a.setData&&a.setData.call(n,l,h)),P(document,"drop",n),S(h,"transform","translateZ(0)")),Le=!0,n._dragStartId=st(n._dragStarted.bind(n,t,e)),P(document,"selectstart",n),Xe=!0,window.getSelection().removeAllRanges(),We&&S(document.body,"user-select","none")},_onDragOver:function(e){var t=this.el,n=e.target,l,a,s,d=this.options,c=d.group,f=D.active,g=tt===c,m=d.sort,E=Q||f,O,y=this,w=!1;if(Vt)return;function U(I,K){se(I,y,Te({evt:e,isOwner:g,axis:O?"vertical":"horizontal",revert:s,dragRect:l,targetRect:a,canSort:m,fromSortable:E,target:n,completed:r,onMove:function(be,me){return lt(R,t,h,l,be,H(be),e,me)},changed:z},K))}function N(){U("dragOverAnimationCapture"),y.captureAnimationState(),y!==E&&E.captureAnimationState()}function r(I){return U("dragOverCompleted",{insertion:I}),I&&(g?f._hideClone():f._showClone(y),y!==E&&(ce(h,Q?Q.options.ghostClass:f.options.ghostClass,!1),ce(h,d.ghostClass,!0)),Q!==y&&y!==D.active?Q=y:y===D.active&&Q&&(Q=null),E===y&&(y._ignoreWhileAnimating=n),y.animateAll(function(){U("dragOverAnimationComplete"),y._ignoreWhileAnimating=null}),y!==E&&(E.animateAll(),E._ignoreWhileAnimating=null)),(n===h&&!h.animated||n===t&&!n.animated)&&(Me=null),!d.dragoverBubble&&!e.rootEl&&n!==document&&(h.parentNode[ue]._isOutsideThisEl(e.target),!I&&Fe(e)),!d.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),w=!0}function z(){fe=he(h),xe=he(h,d.draggable),oe({sortable:y,name:"change",toEl:t,newIndex:fe,newDraggableIndex:xe,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),n=_e(n,d.draggable,t,!0),U("dragOver"),D.eventCanceled)return w;if(h.contains(e.target)||n.animated&&n.animatingX&&n.animatingY||y._ignoreWhileAnimating===n)return r(!1);if(ct=!1,f&&!d.disabled&&(g?m||(s=$!==R):Q===this||(this.lastPutMode=tt.checkPull(this,f,h,e))&&c.checkPut(this,f,h,e))){if(O=this._getDirection(e,n)==="vertical",l=H(h),U("dragOverValid"),D.eventCanceled)return w;if(s)return $=R,N(),this._hideClone(),U("revert"),D.eventCanceled||(Ne?R.insertBefore(h,Ne):R.appendChild(h)),r(!0);var Y=Lt(t,d.draggable);if(!Y||To(e,O,this)&&!Y.animated){if(Y===h)return r(!1);if(Y&&t===e.target&&(n=Y),n&&(a=H(n)),lt(R,t,h,l,n,a,e,!!n)!==!1)return N(),Y&&Y.nextSibling?t.insertBefore(h,Y.nextSibling):t.appendChild(h),$=t,z(),r(!0)}else if(Y&&wo(e,O,this)){var ae=$e(t,0,d,!0);if(ae===h)return r(!1);if(n=ae,a=H(n),lt(R,t,h,l,n,a,e,!1)!==!1)return N(),t.insertBefore(h,ae),$=t,z(),r(!0)}else if(n.parentNode===t){a=H(n);var _=0,b,q=h.parentNode!==t,G=!vo(h.animated&&h.toRect||l,n.animated&&n.toRect||a,O),Ee=O?"top":"left",de=Jt(n,"top","top")||Jt(h,"top","top"),ge=de?de.scrollTop:void 0;Me!==n&&(b=a[Ee],Je=!1,nt=!G&&d.invertSwap||q),_=Eo(e,n,a,O,G?1:d.swapThreshold,d.invertedSwapThreshold==null?d.swapThreshold:d.invertedSwapThreshold,nt,Me===n);var ie;if(_!==0){var v=he(h);do v-=_,ie=$.children[v];while(ie&&(S(ie,"display")==="none"||ie===C))}if(_===0||ie===n)return r(!1);Me=n,je=_;var u=n.nextElementSibling,A=!1;A=_===1;var x=lt(R,t,h,l,n,a,e,A);if(x!==!1)return(x===1||x===-1)&&(A=x===1),Vt=!0,setTimeout(_o,30),N(),A&&!u?t.appendChild(h):n.parentNode.insertBefore(h,A?u:n),de&&dn(de,0,ge-de.scrollTop),$=h.parentNode,b!==void 0&&!nt&&(rt=Math.abs(b-H(n)[Ee])),z(),r(!0)}if(t.contains(h))return r(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){V(document,"mousemove",this._onTouchMove),V(document,"touchmove",this._onTouchMove),V(document,"pointermove",this._onTouchMove),V(document,"dragover",Fe),V(document,"mousemove",Fe),V(document,"touchmove",Fe)},_offUpEvents:function(){var e=this.el.ownerDocument;V(e,"mouseup",this._onDrop),V(e,"touchend",this._onDrop),V(e,"pointerup",this._onDrop),V(e,"pointercancel",this._onDrop),V(e,"touchcancel",this._onDrop),V(document,"selectstart",this)},_onDrop:function(e){var t=this.el,n=this.options;if(fe=he(h),xe=he(h,n.draggable),se("drop",this,{evt:e}),$=h&&h.parentNode,fe=he(h),xe=he(h,n.draggable),D.eventCanceled){this._nulling();return}Le=!1,nt=!1,Je=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),At(this.cloneId),At(this._dragStartId),this.nativeDraggable&&(V(document,"drop",this),V(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),We&&S(document.body,"user-select",""),S(h,"transform",""),e&&(Xe&&(e.cancelable&&e.preventDefault(),!n.dropBubble&&e.stopPropagation()),C&&C.parentNode&&C.parentNode.removeChild(C),(R===$||Q&&Q.lastPutMode!=="clone")&&B&&B.parentNode&&B.parentNode.removeChild(B),h&&(this.nativeDraggable&&V(h,"dragend",this),Dt(h),h.style["will-change"]="",Xe&&!Le&&ce(h,Q?Q.options.ghostClass:this.options.ghostClass,!1),ce(h,this.options.chosenClass,!1),oe({sortable:this,name:"unchoose",toEl:$,newIndex:null,newDraggableIndex:null,originalEvent:e}),R!==$?(fe>=0&&(oe({rootEl:$,name:"add",toEl:$,fromEl:R,originalEvent:e}),oe({sortable:this,name:"remove",toEl:$,originalEvent:e}),oe({rootEl:$,name:"sort",toEl:$,fromEl:R,originalEvent:e}),oe({sortable:this,name:"sort",toEl:$,originalEvent:e})),Q&&Q.save()):fe!==Ue&&fe>=0&&(oe({sortable:this,name:"update",toEl:$,originalEvent:e}),oe({sortable:this,name:"sort",toEl:$,originalEvent:e})),D.active&&((fe==null||fe===-1)&&(fe=Ue,xe=qe),oe({sortable:this,name:"end",toEl:$,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){se("nulling",this),R=h=$=C=Ne=B=it=Ve=Pe=ye=Xe=fe=xe=Ue=qe=Me=je=Q=tt=D.dragged=D.ghost=D.clone=D.active=null,pt.forEach(function(e){e.checked=!0}),pt.length=Tt=Et=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":h&&(this._onDragOver(e),yo(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],t,n=this.el.children,l=0,a=n.length,s=this.options;l<a;l++)t=n[l],_e(t,s.draggable,this.el,!1)&&e.push(t.getAttribute(s.dataIdAttr)||Do(t));return e},sort:function(e,t){var n={},l=this.el;this.toArray().forEach(function(a,s){var d=l.children[s];_e(d,this.options.draggable,l,!1)&&(n[a]=d)},this),t&&this.captureAnimationState(),e.forEach(function(a){n[a]&&(l.removeChild(n[a]),l.appendChild(n[a]))}),t&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return _e(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var n=this.options;if(t===void 0)return n[e];var l=Qe.modifyOption(this,e,t);typeof l<"u"?n[e]=l:n[e]=t,e==="group"&&hn(n)},destroy:function(){se("destroy",this);var e=this.el;e[ue]=null,V(e,"mousedown",this._onTapStart),V(e,"touchstart",this._onTapStart),V(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(V(e,"dragover",this),V(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(t){t.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),ft.splice(ft.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!Ve){if(se("hideClone",this),D.eventCanceled)return;S(B,"display","none"),this.options.removeCloneOnHide&&B.parentNode&&B.parentNode.removeChild(B),Ve=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(Ve){if(se("showClone",this),D.eventCanceled)return;h.parentNode==R&&!this.options.group.revertClone?R.insertBefore(B,h):Ne?R.insertBefore(B,Ne):R.appendChild(B),this.options.group.revertClone&&this.animate(h,B),S(B,"display",""),Ve=!1}}};function yo(o){o.dataTransfer&&(o.dataTransfer.dropEffect="move"),o.cancelable&&o.preventDefault()}function lt(o,e,t,n,l,a,s,d){var c,f=o[ue],g=f.options.onMove,m;return window.CustomEvent&&!Oe&&!Ke?c=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(c=document.createEvent("Event"),c.initEvent("move",!0,!0)),c.to=e,c.from=o,c.dragged=t,c.draggedRect=n,c.related=l||e,c.relatedRect=a||H(e),c.willInsertAfter=d,c.originalEvent=s,o.dispatchEvent(c),g&&(m=g.call(f,c,s)),m}function Dt(o){o.draggable=!1}function _o(){Vt=!1}function wo(o,e,t){var n=H($e(t.el,0,t.options,!0)),l=fn(t.el,t.options,C),a=10;return e?o.clientX<l.left-a||o.clientY<n.top&&o.clientX<n.right:o.clientY<l.top-a||o.clientY<n.bottom&&o.clientX<n.left}function To(o,e,t){var n=H(Lt(t.el,t.options.draggable)),l=fn(t.el,t.options,C),a=10;return e?o.clientX>l.right+a||o.clientY>n.bottom&&o.clientX>n.left:o.clientY>l.bottom+a||o.clientX>n.right&&o.clientY>n.top}function Eo(o,e,t,n,l,a,s,d){var c=n?o.clientY:o.clientX,f=n?t.height:t.width,g=n?t.top:t.left,m=n?t.bottom:t.right,E=!1;if(!s){if(d&&rt<f*l){if(!Je&&(je===1?c>g+f*a/2:c<m-f*a/2)&&(Je=!0),Je)E=!0;else if(je===1?c<g+rt:c>m-rt)return-je}else if(c>g+f*(1-l)/2&&c<m-f*(1-l)/2)return So(e)}return E=E||s,E&&(c<g+f*a/2||c>m-f*a/2)?c>g+f/2?1:-1:0}function So(o){return he(h)<he(o)?1:-1}function Do(o){for(var e=o.tagName+o.className+o.src+o.href+o.textContent,t=e.length,n=0;t--;)n+=e.charCodeAt(t);return n.toString(36)}function Co(o){pt.length=0;for(var e=o.getElementsByTagName("input"),t=e.length;t--;){var n=e[t];n.checked&&pt.push(n)}}function st(o){return setTimeout(o,0)}function At(o){return clearTimeout(o)}ht&&P(document,"touchmove",function(o){(D.active||Le)&&o.cancelable&&o.preventDefault()});D.utils={on:P,off:V,css:S,find:sn,is:function(e,t){return!!_e(e,t,e,!1)},extend:ro,throttle:un,closest:_e,toggleClass:ce,clone:cn,index:he,nextTick:st,cancelNextTick:At,detectDirection:mn,getChild:$e,expando:ue};D.get=function(o){return o[ue]};D.mount=function(){for(var o=arguments.length,e=new Array(o),t=0;t<o;t++)e[t]=arguments[t];e[0].constructor===Array&&(e=e[0]),e.forEach(function(n){if(!n.prototype||!n.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(n));n.utils&&(D.utils=Te(Te({},D.utils),n.utils)),Qe.mount(n)})};D.create=function(o,e){return new D(o,e)};D.version=ao;var W=[],Ye,Pt,Ft=!1,Ct,It,mt,Ge;function Io(){function o(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return o.prototype={dragStarted:function(t){var n=t.originalEvent;this.sortable.nativeDraggable?P(document,"dragover",this._handleAutoScroll):this.options.supportPointer?P(document,"pointermove",this._handleFallbackAutoScroll):n.touches?P(document,"touchmove",this._handleFallbackAutoScroll):P(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(t){var n=t.originalEvent;!this.options.dragOverBubble&&!n.rootEl&&this._handleAutoScroll(n)},drop:function(){this.sortable.nativeDraggable?V(document,"dragover",this._handleAutoScroll):(V(document,"pointermove",this._handleFallbackAutoScroll),V(document,"touchmove",this._handleFallbackAutoScroll),V(document,"mousemove",this._handleFallbackAutoScroll)),tn(),ut(),so()},nulling:function(){mt=Pt=Ye=Ft=Ge=Ct=It=null,W.length=0},_handleFallbackAutoScroll:function(t){this._handleAutoScroll(t,!0)},_handleAutoScroll:function(t,n){var l=this,a=(t.touches?t.touches[0]:t).clientX,s=(t.touches?t.touches[0]:t).clientY,d=document.elementFromPoint(a,s);if(mt=t,n||this.options.forceAutoScrollFallback||Ke||Oe||We){Ot(t,this.options,d,n);var c=Ae(d,!0);Ft&&(!Ge||a!==Ct||s!==It)&&(Ge&&tn(),Ge=setInterval(function(){var f=Ae(document.elementFromPoint(a,s),!0);f!==c&&(c=f,ut()),Ot(t,l.options,f,n)},10),Ct=a,It=s)}else{if(!this.options.bubbleScroll||Ae(d,!0)===we()){ut();return}Ot(t,this.options,Ae(d,!1),!1)}}},Ie(o,{pluginName:"scroll",initializeByDefault:!0})}function ut(){W.forEach(function(o){clearInterval(o.pid)}),W=[]}function tn(){clearInterval(Ge)}var Ot=un(function(o,e,t,n){if(e.scroll){var l=(o.touches?o.touches[0]:o).clientX,a=(o.touches?o.touches[0]:o).clientY,s=e.scrollSensitivity,d=e.scrollSpeed,c=we(),f=!1,g;Pt!==t&&(Pt=t,ut(),Ye=e.scroll,g=e.scrollFn,Ye===!0&&(Ye=Ae(t,!0)));var m=0,E=Ye;do{var O=E,y=H(O),w=y.top,U=y.bottom,N=y.left,r=y.right,z=y.width,Y=y.height,ae=void 0,_=void 0,b=O.scrollWidth,q=O.scrollHeight,G=S(O),Ee=O.scrollLeft,de=O.scrollTop;O===c?(ae=z<b&&(G.overflowX==="auto"||G.overflowX==="scroll"||G.overflowX==="visible"),_=Y<q&&(G.overflowY==="auto"||G.overflowY==="scroll"||G.overflowY==="visible")):(ae=z<b&&(G.overflowX==="auto"||G.overflowX==="scroll"),_=Y<q&&(G.overflowY==="auto"||G.overflowY==="scroll"));var ge=ae&&(Math.abs(r-l)<=s&&Ee+z<b)-(Math.abs(N-l)<=s&&!!Ee),ie=_&&(Math.abs(U-a)<=s&&de+Y<q)-(Math.abs(w-a)<=s&&!!de);if(!W[m])for(var v=0;v<=m;v++)W[v]||(W[v]={});(W[m].vx!=ge||W[m].vy!=ie||W[m].el!==O)&&(W[m].el=O,W[m].vx=ge,W[m].vy=ie,clearInterval(W[m].pid),(ge!=0||ie!=0)&&(f=!0,W[m].pid=setInterval((function(){n&&this.layer===0&&D.active._onTouchMove(mt);var u=W[this.layer].vy?W[this.layer].vy*d:0,A=W[this.layer].vx?W[this.layer].vx*d:0;typeof g=="function"&&g.call(D.dragged.parentNode[ue],A,u,o,mt,W[this.layer].el)!=="continue"||dn(W[this.layer].el,A,u)}).bind({layer:m}),24))),m++}while(e.bubbleScroll&&E!==c&&(E=Ae(E,!1)));Ft=f}},30),bn=function(e){var t=e.originalEvent,n=e.putSortable,l=e.dragEl,a=e.activeSortable,s=e.dispatchSortableEvent,d=e.hideGhostForTarget,c=e.unhideGhostForTarget;if(t){var f=n||a;d();var g=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,m=document.elementFromPoint(g.clientX,g.clientY);c(),f&&!f.el.contains(m)&&(s("spill"),this.onSpill({dragEl:l,putSortable:n}))}};function Ut(){}Ut.prototype={startIndex:null,dragStart:function(e){var t=e.oldDraggableIndex;this.startIndex=t},onSpill:function(e){var t=e.dragEl,n=e.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var l=$e(this.sortable.el,this.startIndex,this.options);l?this.sortable.el.insertBefore(t,l):this.sortable.el.appendChild(t),this.sortable.animateAll(),n&&n.animateAll()},drop:bn};Ie(Ut,{pluginName:"revertOnSpill"});function Rt(){}Rt.prototype={onSpill:function(e){var t=e.dragEl,n=e.putSortable,l=n||this.sortable;l.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),l.animateAll()},drop:bn};Ie(Rt,{pluginName:"removeOnSpill"});D.mount(new Io);D.mount(Rt,Ut);const Oo={class:"field-config-table"},xo={style:{"max-width":"500px"}},Vo={style:{"white-space":"pre-wrap","word-break":"break-all"}},Ao={style:{cursor:"help"}},Po=Nt({__name:"FieldConfigTable",props:{modelValue:{},fieldType:{}},emits:["update:modelValue"],setup(o,{emit:e}){const t=o,n=e,l=J(),a=J(null),s=Re(()=>({search:"查询字段",column:"列表字段",form:"表单字段"})[t.fieldType]),d=Re(()=>t.fieldType==="column"?`{
  // ---------- TAG配置 ----------
  "tagEffect": "light",   // 标签样式: dark/light/plain
  "tagMap": {             // 文案样式映射: primary/success/info/warning/danger
    "正常": "success",
    "禁用": "danger"
  }
}`:t.fieldType==="search"?`{
  "placeholder": "提示信息",
  "options": [{"label": "选项1", "value": "1"}]
}`:`{
  "placeholder": "提示信息",
  "defaultValue": "默认值",
  "disabled": false,
  "readonly": false,
  "multiple": false,
  // ----- 下拉框/树形下拉框 -----
  "localOptions": [{"label": "正常", "value": "Enable"}],
  "enumOptions": "com.xxx.enums.EnableStatus",
  "queryUrl": "/api/dept/tree",
  "props": { "value": "id", "label": "name", "children": "children" },
  "checkStrictly": true,
  "showCheckbox": true,
  "collapseTags": false,
  // ----- 文件上传配置 -----
  "accept": "image/*",
  "limit": 1,
  "maxSize": 5
}`),c=()=>{const m={_id:Date.now()+Math.random(),fieldKey:"",fieldLabel:"",extra:""};t.fieldType==="column"?(m.width="",m.showType="TEXT",m.formatScript=""):(m.required=!1,m.inputType="input"),n("update:modelValue",[...t.modelValue,m]),yt(()=>g())},f=m=>{const E=[...t.modelValue];E.splice(m,1),n("update:modelValue",E)},g=()=>{if(!l.value)return;a.value&&(a.value.destroy(),a.value=null);const m=l.value.$el.querySelector(".el-table__body-wrapper tbody");m&&(a.value=D.create(m,{animation:150,handle:".drag-handle",onEnd:E=>{const{oldIndex:O,newIndex:y}=E;if(O!==void 0&&y!==void 0&&O!==y){const w=[...t.modelValue],U=w[O];w.splice(O,1),w.splice(y,0,U),n("update:modelValue",w)}}}))};return nn(()=>t.modelValue,()=>{yt(()=>{t.modelValue&&t.modelValue.length>0&&g()})},{deep:!0}),on(()=>{t.modelValue&&t.modelValue.length>0&&yt(()=>g())}),(m,E)=>{const O=F("el-button"),y=F("el-icon"),w=F("el-table-column"),U=F("el-input"),N=F("el-option"),r=F("el-select"),z=F("el-switch"),Y=F("el-tooltip"),ae=F("el-table");return M(),le("div",Oo,[i(O,{type:"primary",size:"small",onClick:c},{default:p(()=>[L("添加"+Se(s.value),1)]),_:1}),i(ae,{ref_key:"tableRef",ref:l,data:o.modelValue,border:"","row-key":"_id",style:{"margin-top":"10px"}},{default:p(()=>[i(w,{label:"拖拽",width:"60",align:"center"},{default:p(()=>[i(y,{class:"drag-handle",style:{cursor:"move","font-size":"16px"}},{default:p(()=>[i(ve(An))]),_:1})]),_:1}),i(w,{prop:"fieldKey",label:"字段名",width:"120"},{default:p(({row:_})=>[i(U,{modelValue:_.fieldKey,"onUpdate:modelValue":b=>_.fieldKey=b,placeholder:"字段名",size:"small"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),i(w,{prop:"fieldLabel",label:o.fieldType==="column"?"列标题":"标签",width:"120"},{default:p(({row:_})=>[i(U,{modelValue:_.fieldLabel,"onUpdate:modelValue":b=>_.fieldLabel=b,placeholder:"标签",size:"small"},null,8,["modelValue","onUpdate:modelValue"])]),_:1},8,["label"]),o.fieldType==="column"?(M(),te(w,{key:0,prop:"width",label:"宽度",width:"100"},{default:p(({row:_})=>[i(U,{modelValue:_.width,"onUpdate:modelValue":b=>_.width=b,placeholder:"宽度",size:"small"},null,8,["modelValue","onUpdate:modelValue"])]),_:1})):Z("",!0),o.fieldType==="search"||o.fieldType==="form"?(M(),te(w,{key:1,prop:"inputType",label:"类型",width:"120"},{default:p(({row:_})=>[i(r,{modelValue:_.inputType,"onUpdate:modelValue":b=>_.inputType=b,placeholder:"类型",size:"small"},{default:p(()=>[o.fieldType==="search"?(M(),le(De,{key:0},[i(N,{label:"输入框",value:"input"}),i(N,{label:"下拉框",value:"select"}),i(N,{label:"日期",value:"date"}),i(N,{label:"日期范围",value:"dateRange"})],64)):(M(),le(De,{key:1},[i(N,{label:"输入框",value:"input"}),i(N,{label:"文本域",value:"textarea"}),i(N,{label:"数字输入框",value:"number"}),i(N,{label:"下拉框",value:"select"}),i(N,{label:"树型下拉框",value:"treeSelect"}),i(N,{label:"日期",value:"date"}),i(N,{label:"日期范围",value:"dateRange"}),i(N,{label:"文件上传",value:"upload"}),i(N,{label:"文件下载",value:"download"})],64))]),_:1},8,["modelValue","onUpdate:modelValue"])]),_:1})):Z("",!0),o.fieldType==="column"?(M(),te(w,{key:2,prop:"showType",label:"展示类型",width:"120"},{default:p(({row:_})=>[i(r,{modelValue:_.showType,"onUpdate:modelValue":b=>_.showType=b,placeholder:"展示类型",size:"small"},{default:p(()=>[i(N,{label:"文本",value:"TEXT"}),i(N,{label:"TAG标签",value:"TAG"}),i(N,{label:"图片",value:"IMAGE"}),i(N,{label:"视频",value:"VIDEO"}),i(N,{label:"音频",value:"AUDIO"}),i(N,{label:"链接",value:"LINK"})]),_:1},8,["modelValue","onUpdate:modelValue"])]),_:1})):Z("",!0),o.fieldType==="column"?(M(),te(w,{key:3,prop:"formatScript",label:"格式化JS"},{default:p(({row:_})=>[i(U,{modelValue:_.formatScript,"onUpdate:modelValue":b=>_.formatScript=b,placeholder:"格式化JS代码; 参数:[value,row]",size:"small"},null,8,["modelValue","onUpdate:modelValue"])]),_:1})):Z("",!0),o.fieldType==="search"||o.fieldType==="form"?(M(),te(w,{key:4,prop:"required",label:"必填",width:"80"},{default:p(({row:_})=>[i(z,{modelValue:_.required,"onUpdate:modelValue":b=>_.required=b,size:"small"},null,8,["modelValue","onUpdate:modelValue"])]),_:1})):Z("",!0),i(w,{prop:"extra"},{header:p(()=>[i(Y,{placement:"top",width:"500px"},{content:p(()=>[k("div",xo,[E[0]||(E[0]=k("div",null,"额外配置示例（JSON格式）：",-1)),k("pre",Vo,Se(d.value),1)])]),default:p(()=>[k("span",Ao,[E[1]||(E[1]=L(" 额外配置 ",-1)),i(y,{style:{"margin-left":"4px"}},{default:p(()=>[i(ve(xt))]),_:1})])]),_:1})]),default:p(({row:_})=>[i(U,{modelValue:_.extra,"onUpdate:modelValue":b=>_.extra=b,placeholder:"JSON格式",size:"small"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),i(w,{label:"操作",width:"80"},{default:p(({$index:_})=>[i(O,{link:"",type:"danger",size:"small",onClick:b=>f(_)},{default:p(()=>[...E[2]||(E[2]=[L("删除",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])])}}}),ze=kt(Po,[["__scopeId","data-v-e1eda668"]]),Fo={class:"menu-manage-container"},No={class:"card-header"},ko={class:"tree-node"},Mo={class:"node-label"},Lo={class:"node-actions"},Uo={class:"card-header"},Ro={style:{display:"flex",gap:"10px","align-items":"center"}},Bo={style:{cursor:"help"}},$o={style:{cursor:"help"}},zo=Nt({__name:"menu_manage",setup(o){const e=Pn(),t=J(),n=J(),l=J(null),a=J([]),s=J(!1),d=J(!1),c=v=>{r.value&&(v.type==="element"?r.value.icon=v.name:v.type==="iconify"?r.value.icon=`iconify:${v.name}`:v.type==="custom"&&(r.value.icon=`custom:${v.name}`))},f=J(!1),g=J(""),m=async()=>{if(!r.value){j.warning("请先选择或创建一个菜单");return}try{const{id:v,parentId:u,idPath:A,children:x,...I}=r.value,K={...I,columnFieldList:y(I.columnFieldList||[]),formFieldList:y(I.formFieldList||[]),searchFieldList:y(I.searchFieldList||[])};if(navigator.clipboard){const pe=JSON.stringify(K,null,2);await navigator.clipboard.writeText(pe),j.success("配置已复制到剪贴板")}else console.log(`导出菜单配置(${r.value.menuName}):
`,JSON.stringify(K)),j.warning("复制到剪贴板失败, 已打印到浏览器控制台, 请按F12打开浏览器控制台手动复制")}catch(v){j.error(v.message||"导出配置失败"),console.error("导出配置失败:",v)}},E=()=>{if(!r.value){j.warning("请先选择或创建一个菜单");return}g.value="",f.value=!0},O=()=>{if(!g.value.trim()){j.warning("请输入配置JSON");return}try{const v=JSON.parse(g.value),{id:u,parentId:A,idPath:x,children:I,...K}=v,pe={...K,columnFieldList:w(K.columnFieldList||[]),formFieldList:w(K.formFieldList||[]),searchFieldList:w(K.searchFieldList||[])};r.value&&(r.value={id:r.value.id,parentId:r.value.parentId,...pe}),f.value=!1,j.success("配置导入成功")}catch(v){j.error("JSON格式错误，请检查输入"),console.error("导入配置失败:",v)}},y=v=>Array.isArray(v)?v.map(u=>{const{_id:A,...x}=u;return x}):v,w=v=>Array.isArray(v)?v.map(u=>({...u,_id:Date.now()+Math.random()})):[],U=async()=>{a.value=await et.getAllMenuTree()},N=Re(()=>{const v=l.value?[l.value.id]:[],u=A=>A.filter(x=>!v.includes(x.id)).map(x=>({...x,children:x.children?u(x.children):void 0}));return u(a.value)}),r=J(null),z=v=>{if(v)r.value={id:v.id,parentId:v.parentId,menuName:v.menuName,menuType:v.menuType,icon:v.icon||"",sort:v.sort,routePath:v.routePath||"",pageType:v.pageType||"",apiUrl:v.apiUrl||"",extApiUrl:v.extApiUrl||"",extra:v.extra||"",customComponent:v.customComponent||"",buttonPosition:v.buttonPosition||Ln.FOOTER,buttonAction:v.buttonAction||Mn.MODAL_FORM,beforeShowScript:v.beforeShowScript||"",beforeSubmitScript:v.beforeSubmitScript||"",searchFieldList:w(v.searchFieldList||[]),columnFieldList:w(v.columnFieldList||[]),formFieldList:w(v.formFieldList||[])};else{const u=Math.max(...a.value.map(A=>A.sort));r.value={parentId:0,menuType:re.MODULE,sort:u+1,searchFieldList:[],columnFieldList:[],formFieldList:[]}}},Y={parentId:[{required:!0,message:"请选择父级菜单",trigger:"change"}],menuName:[{required:!0,message:"请输入菜单名称",trigger:"blur"}],menuType:[{required:!0,message:"请选择菜单类型",trigger:"change"}],pageType:[{required:!0,message:"请选择页面类型",trigger:"change"}],routePath:[{required:!0,message:"请输入路由路径",trigger:"blur",validator:(v,u,A)=>{var x;((x=r.value)==null?void 0:x.menuType)===re.PAGE&&!u?A(new Error("页面类型必须填写路由路径")):A()}}],buttonPosition:[{required:!0,message:"请选择按钮位置",trigger:"change",validator:(v,u,A)=>{var x;((x=r.value)==null?void 0:x.menuType)===re.BUTTON&&!u?A(new Error("按钮类型必须选择按钮位置")):A()}}],buttonAction:[{required:!0,message:"请选择操作类型",trigger:"change",validator:(v,u,A)=>{var x;((x=r.value)==null?void 0:x.menuType)===re.BUTTON&&!u?A(new Error("按钮类型必须选择操作类型")):A()}}]},ae=v=>{var u;l.value=v,z(v),(u=t.value)==null||u.setCurrentKey(v.id)},_=()=>{l.value=null,z()},b=v=>{l.value=null,z(),r.value&&(r.value.parentId=v.id,r.value.sort=v.children&&v.children.length>0?Math.max(...v.children.map(u=>u.sort))+1:1,v.menuType===re.MODULE?r.value.menuType=re.DIRECTORY:v.menuType===re.DIRECTORY?r.value.menuType=re.PAGE:v.menuType===re.PAGE?r.value.menuType=re.BUTTON:v.menuType===re.BUTTON&&(r.value.menuType=re.BUTTON))},q=async v=>{try{await Nn.confirm(`确定要删除菜单"${v.menuName}"吗？`,"提示",{type:"warning"}),await et.deleteMenu(v.id),j.success("删除成功"),await U(),await e.loadMenus(),l.value=null,r.value=null}catch(u){u!=="cancel"&&j.error(u.message||"删除失败")}},G=()=>{r.value&&(r.value.menuType!==re.PAGE&&(r.value.routePath="",r.value.pageType="",r.value.columnFieldList=[],r.value.searchFieldList=[]),r.value.menuType!==re.BUTTON&&(r.value.buttonPosition="",r.value.buttonAction="",r.value.beforeShowScript="",r.value.beforeSubmitScript="",r.value.formFieldList=[]))},Ee=()=>{r.value&&r.value.pageType!==kn.LIST&&(r.value.columnFieldList=[],r.value.searchFieldList=[])},de=()=>{},ge=async()=>{n.value&&await n.value.validate(async v=>{if(v&&r.value)try{s.value=!0;const u={id:r.value.id,parentId:r.value.parentId,menuName:r.value.menuName,menuType:r.value.menuType,icon:r.value.icon||null,sort:r.value.sort,routePath:r.value.routePath||null,pageType:r.value.pageType||null,apiUrl:r.value.apiUrl||null,extApiUrl:r.value.extApiUrl||null,extra:r.value.extra||null,customComponent:r.value.customComponent||null,buttonPosition:r.value.buttonPosition||null,buttonAction:r.value.buttonAction||null,beforeShowScript:r.value.beforeShowScript||null,beforeSubmitScript:r.value.beforeSubmitScript||null,columnFieldList:y(r.value.columnFieldList),formFieldList:y(r.value.formFieldList),searchFieldList:y(r.value.searchFieldList)},A=l.value?await et.updateMenu(u):await et.createMenu(u);if(j.success("保存成功"),await U(),await e.loadMenus(),!l.value&&A){const x=K=>{for(const pe of K){if(pe.id===A.id)return pe;if(pe.children){const be=x(pe.children);if(be)return be}}return null},I=x(a.value);I&&ae(I)}}catch(u){j.error(u.message||"保存失败")}finally{s.value=!1}})},ie=()=>{l.value?z(l.value):z()};return on(async()=>{await U()}),(v,u)=>{var $t;const A=F("el-icon"),x=F("el-button"),I=F("el-tree"),K=F("el-card"),pe=F("el-col"),be=F("el-divider"),me=F("el-input"),X=F("el-form-item"),ne=F("el-option"),Ze=F("el-select"),yn=F("el-tree-select"),_n=F("el-input-number"),Bt=F("el-tooltip"),wn=F("el-form"),Tn=F("el-empty"),En=F("el-row"),Sn=F("el-dialog");return M(),le("div",Fo,[i(En,{gutter:10,class:"menu-manage-row"},{default:p(()=>[i(pe,{span:5,class:"menu-tree-col"},{default:p(()=>[i(K,{class:"menu-tree-card"},{header:p(()=>[k("div",No,[u[26]||(u[26]=k("span",null,"菜单树",-1)),i(x,{type:"primary",onClick:_},{default:p(()=>[i(A,null,{default:p(()=>[i(ve(Gt))]),_:1}),u[25]||(u[25]=L(" 新增根节点 ",-1))]),_:1})])]),default:p(()=>[i(I,{ref_key:"treeRef",ref:t,data:a.value,props:{label:"menuName",children:"children"},"node-key":"id","default-expand-all":"","highlight-current":"","expand-on-click-node":!1,onNodeClick:ae},{default:p(({data:T})=>[k("div",ko,[k("span",Mo,[T.icon?(M(),te(Wt,{key:0,icon:T.icon,size:14,class:"node-icon"},null,8,["icon"])):Z("",!0),L(" "+Se(T.menuName),1)]),k("span",Lo,[i(x,{link:"",size:"small",type:"primary",onClick:Yt(Dn=>b(T),["stop"])},{default:p(()=>[i(A,null,{default:p(()=>[i(ve(Gt))]),_:1})]),_:1},8,["onClick"]),i(x,{link:"",size:"small",type:"danger",onClick:Yt(Dn=>q(T),["stop"])},{default:p(()=>[i(A,null,{default:p(()=>[i(ve(Fn))]),_:1})]),_:1},8,["onClick"])])])]),_:1},8,["data"])]),_:1})]),_:1}),i(pe,{span:19,class:"menu-form-col"},{default:p(()=>[i(K,{class:"menu-form-card"},{header:p(()=>[k("div",Uo,[k("span",null,Se(l.value?"编辑菜单":"新增菜单"),1)])]),default:p(()=>[r.value?(M(),te(wn,{key:0,ref_key:"formRef",ref:n,model:r.value,rules:Y,"label-width":"120px",class:"menu-form"},{default:p(()=>[i(be,{"content-position":"left"},{default:p(()=>[...u[27]||(u[27]=[L("基础信息",-1)])]),_:1}),i(X,{label:"菜单名称",prop:"menuName"},{default:p(()=>[i(me,{modelValue:r.value.menuName,"onUpdate:modelValue":u[0]||(u[0]=T=>r.value.menuName=T),placeholder:"请输入菜单名称"},null,8,["modelValue"])]),_:1}),i(X,{label:"菜单类型",prop:"menuType"},{default:p(()=>[i(Ze,{modelValue:r.value.menuType,"onUpdate:modelValue":u[1]||(u[1]=T=>r.value.menuType=T),placeholder:"请选择菜单类型",onChange:G},{default:p(()=>[i(ne,{label:"模块",value:"MODULE"}),i(ne,{label:"目录",value:"DIRECTORY"}),i(ne,{label:"页面",value:"PAGE"}),i(ne,{label:"按钮",value:"BUTTON"})]),_:1},8,["modelValue"])]),_:1}),i(X,{label:"父级菜单",prop:"parentId"},{default:p(()=>[i(yn,{modelValue:r.value.parentId,"onUpdate:modelValue":u[2]||(u[2]=T=>r.value.parentId=T),data:N.value,props:{label:"menuName",value:"id",children:"children"},disabled:"",placeholder:"请选择父级菜单","check-strictly":"","render-after-expand":!1,style:{width:"100%"}},null,8,["modelValue","data"])]),_:1}),i(X,{label:"图标"},{default:p(()=>[k("div",Ro,[i(me,{modelValue:r.value.icon,"onUpdate:modelValue":u[3]||(u[3]=T=>r.value.icon=T),placeholder:"请输入图标名称或选择图标",style:{flex:"1"},readonly:""},null,8,["modelValue"]),i(x,{onClick:u[4]||(u[4]=T=>d.value=!0)},{default:p(()=>[...u[28]||(u[28]=[L("选择图标",-1)])]),_:1}),r.value.icon?(M(),te(Wt,{icon:r.value.icon,key:r.value.icon,size:20},null,8,["icon"])):Z("",!0)])]),_:1}),i(X,{label:"排序",prop:"sort"},{default:p(()=>[i(_n,{modelValue:r.value.sort,"onUpdate:modelValue":u[5]||(u[5]=T=>r.value.sort=T),min:0},null,8,["modelValue"])]),_:1}),i(X,null,{label:p(()=>[i(Bt,{placement:"top",width:"500px"},{content:p(()=>[...u[29]||(u[29]=[k("div",{style:{"max-width":"500px"}},[k("pre",{style:{"white-space":"pre-wrap","word-break":"break-all"}},`列表: 将被用作查询接口
按钮:将被用作数据提交接口
                  `)],-1)])]),default:p(()=>[k("span",Bo,[u[30]||(u[30]=L(" 后台接口 ",-1)),i(A,{style:{"margin-left":"4px"}},{default:p(()=>[i(ve(xt))]),_:1})])]),_:1})]),default:p(()=>[i(me,{modelValue:r.value.apiUrl,"onUpdate:modelValue":u[6]||(u[6]=T=>r.value.apiUrl=T),placeholder:"后台接口地址"},null,8,["modelValue"])]),_:1}),i(X,{label:"扩展后台接口",prop:"extApiUrl"},{default:p(()=>[i(me,{modelValue:r.value.extApiUrl,"onUpdate:modelValue":u[7]||(u[7]=T=>r.value.extApiUrl=T),placeholder:"扩展鉴权后台接口地址,多个用逗号分割"},null,8,["modelValue"])]),_:1}),i(X,null,{label:p(()=>[i(Bt,{placement:"top",width:"500px"},{content:p(()=>[...u[31]||(u[31]=[k("div",{style:{"max-width":"500px"}},[k("pre",{style:{margin:"5px 0","white-space":"pre-wrap","word-break":"break-all"}},`{
  -------------------------- 列表配置 --------------------------
  "rowKey": "id",           // 列表中的唯一键;构建树列表时必须要此配置
  "defaultExpandAll": true, // 是否默认全部展开
  "pagination": false,      // 不使用分页
  "maxColumnButtons": 3,    // 行按钮-最多显示几个
  -------------------------- 按钮配置 --------------------------
  "buttonType":"primary",       // 按钮样式: primary,success,info,warning,danger
  "message": "你确定要删除用户吗?",
  "modalWidth": "600px",
}
                      `)],-1)])]),default:p(()=>[k("span",$o,[u[32]||(u[32]=L(" 额外配置 ",-1)),i(A,{style:{"margin-left":"4px"}},{default:p(()=>[i(ve(xt))]),_:1})])]),_:1})]),default:p(()=>[i(me,{modelValue:r.value.extra,"onUpdate:modelValue":u[8]||(u[8]=T=>r.value.extra=T),type:"textarea",rows:3,placeholder:'请输入JSON格式的额外配置，如：{"rowKey":"id"}'},null,8,["modelValue"])]),_:1}),r.value.menuType==="PAGE"?(M(),le(De,{key:0},[i(be,{"content-position":"left"},{default:p(()=>[...u[33]||(u[33]=[L("页面配置",-1)])]),_:1}),i(X,{label:"页面类型",prop:"pageType"},{default:p(()=>[i(Ze,{modelValue:r.value.pageType,"onUpdate:modelValue":u[9]||(u[9]=T=>r.value.pageType=T),placeholder:"请选择页面类型",onChange:Ee},{default:p(()=>[i(ne,{label:"列表页面",value:"LIST"}),i(ne,{label:"自定义页面",value:"CUSTOM"}),i(ne,{label:"外部页面",value:"OUTER_LINK"})]),_:1},8,["modelValue"])]),_:1}),i(X,{label:"页面路由",prop:"routePath"},{default:p(()=>[i(me,{modelValue:r.value.routePath,"onUpdate:modelValue":u[10]||(u[10]=T=>r.value.routePath=T),placeholder:"请输入路由路径，如：/user/list"},null,8,["modelValue"])]),_:1}),r.value.pageType==="CUSTOM"?(M(),te(X,{key:0,label:"自定义组件",prop:"customComponent"},{default:p(()=>[i(me,{modelValue:r.value.customComponent,"onUpdate:modelValue":u[11]||(u[11]=T=>r.value.customComponent=T),placeholder:"自定义组件名，需要在 src/views/custom/ 路径下"},null,8,["modelValue"])]),_:1})):Z("",!0),r.value.pageType==="LIST"?(M(),le(De,{key:1},[i(be,{"content-position":"left"},{default:p(()=>[...u[34]||(u[34]=[L("列表页面配置",-1)])]),_:1}),i(X,{label:"查询字段"},{default:p(()=>[i(ze,{modelValue:r.value.searchFieldList,"onUpdate:modelValue":u[12]||(u[12]=T=>r.value.searchFieldList=T),"field-type":"search"},null,8,["modelValue"])]),_:1}),i(X,{label:"列表字段"},{default:p(()=>[i(ze,{modelValue:r.value.columnFieldList,"onUpdate:modelValue":u[13]||(u[13]=T=>r.value.columnFieldList=T),"field-type":"column"},null,8,["modelValue"])]),_:1})],64)):Z("",!0)],64)):Z("",!0),r.value.menuType==="BUTTON"?(M(),le(De,{key:1},[i(be,{"content-position":"left"},{default:p(()=>[...u[35]||(u[35]=[L("按钮配置",-1)])]),_:1}),i(X,{label:"按钮位置",prop:"buttonPosition"},{default:p(()=>[i(Ze,{modelValue:r.value.buttonPosition,"onUpdate:modelValue":u[14]||(u[14]=T=>r.value.buttonPosition=T),placeholder:"请选择按钮位置"},{default:p(()=>[i(ne,{label:"行级按钮",value:"ROW"}),i(ne,{label:"底部按钮",value:"FOOTER"})]),_:1},8,["modelValue"])]),_:1}),i(X,{label:"操作类型",prop:"buttonAction"},{default:p(()=>[i(Ze,{modelValue:r.value.buttonAction,"onUpdate:modelValue":u[15]||(u[15]=T=>r.value.buttonAction=T),placeholder:"请选择操作类型",onChange:de},{default:p(()=>[i(ne,{label:"弹窗表单",value:"MODAL_FORM"}),i(ne,{label:"弹窗列表",value:"MODAL_LIST"}),i(ne,{label:"确认框",value:"CONFIRM"}),i(ne,{label:"导出(带查询参数)",value:"EXPORT"}),i(ne,{label:"下载文件",value:"DOWNLOAD"}),i(ne,{label:"打开新页面",value:"PAGE"})]),_:1},8,["modelValue"])]),_:1}),r.value.buttonPosition==="ROW"&&["MODAL_FORM","MODAL_LIST"].includes(r.value.buttonAction)?(M(),te(X,{key:0,label:"回显前处理脚本"},{default:p(()=>[i(me,{modelValue:r.value.beforeShowScript,"onUpdate:modelValue":u[16]||(u[16]=T=>r.value.beforeShowScript=T),type:"textarea",rows:3,placeholder:"请输入JavaScript代码，用于在回显前处理表单数据; 参数:[row, request]   在添加下级菜单时,回填父级ID"},null,8,["modelValue"])]),_:1})):Z("",!0),["MODAL_FORM","CONFIRM"].includes(r.value.buttonAction)?(M(),te(X,{key:1,label:"提交前处理脚本"},{default:p(()=>[i(me,{modelValue:r.value.beforeSubmitScript,"onUpdate:modelValue":u[17]||(u[17]=T=>r.value.beforeSubmitScript=T),type:"textarea",rows:3,placeholder:"请输入JavaScript代码，用于在提交前处理表单数据; 参数:[formData, request]"},null,8,["modelValue"])]),_:1})):Z("",!0),r.value.buttonAction==="MODAL_FORM"?(M(),te(X,{key:2,label:"表单字段"},{default:p(()=>[i(ze,{modelValue:r.value.formFieldList,"onUpdate:modelValue":u[18]||(u[18]=T=>r.value.formFieldList=T),"field-type":"form"},null,8,["modelValue"])]),_:1})):Z("",!0),r.value.buttonAction==="MODAL_LIST"?(M(),le(De,{key:3},[i(be,{"content-position":"left"},{default:p(()=>[...u[36]||(u[36]=[L("弹窗列表配置",-1)])]),_:1}),i(X,{label:"查询字段"},{default:p(()=>[i(ze,{modelValue:r.value.searchFieldList,"onUpdate:modelValue":u[19]||(u[19]=T=>r.value.searchFieldList=T),"field-type":"search"},null,8,["modelValue"])]),_:1}),i(X,{label:"列表字段"},{default:p(()=>[i(ze,{modelValue:r.value.columnFieldList,"onUpdate:modelValue":u[20]||(u[20]=T=>r.value.columnFieldList=T),"field-type":"column"},null,8,["modelValue"])]),_:1})],64)):Z("",!0)],64)):Z("",!0),i(X,{class:"menu-form-actions"},{default:p(()=>[i(x,{type:"primary",loading:s.value,onClick:ge},{default:p(()=>[...u[37]||(u[37]=[L("保存",-1)])]),_:1},8,["loading"]),i(x,{onClick:ie},{default:p(()=>[...u[38]||(u[38]=[L("重置",-1)])]),_:1}),i(x,{type:"success",onClick:m},{default:p(()=>[...u[39]||(u[39]=[L("导出配置",-1)])]),_:1}),i(x,{type:"warning",onClick:E},{default:p(()=>[...u[40]||(u[40]=[L("导入配置",-1)])]),_:1})]),_:1})]),_:1},8,["model"])):(M(),te(Tn,{key:1,description:"请选择菜单节点进行编辑"}))]),_:1})]),_:1})]),_:1}),i(to,{modelValue:d.value,"onUpdate:modelValue":u[21]||(u[21]=T=>d.value=T),"current-icon":($t=r.value)==null?void 0:$t.icon,onSelect:c},null,8,["modelValue","current-icon"]),i(Sn,{modelValue:f.value,"onUpdate:modelValue":u[24]||(u[24]=T=>f.value=T),title:"导入配置",width:"600px","close-on-click-modal":!1},{footer:p(()=>[i(x,{onClick:u[23]||(u[23]=T=>f.value=!1)},{default:p(()=>[...u[41]||(u[41]=[L("取消",-1)])]),_:1}),i(x,{type:"primary",onClick:O},{default:p(()=>[...u[42]||(u[42]=[L("确认导入",-1)])]),_:1})]),default:p(()=>[i(me,{modelValue:g.value,"onUpdate:modelValue":u[22]||(u[22]=T=>g.value=T),type:"textarea",rows:15,placeholder:"请粘贴菜单配置JSON字符串"},null,8,["modelValue"])]),_:1},8,["modelValue"])])}}}),Wo=kt(zo,[["__scopeId","data-v-a4e718df"]]);export{Wo as default};
